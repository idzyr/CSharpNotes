# 数据绑定

> 个人理解绑定这个词语在这里并不恰当是一个音译词语不便理解 给人感觉是指单方面的信息提供，而Data binding是两个事务之间建立某种联系，感觉这里使用关联这个词语更为恰当。结合这个词义更容易理解这种编程思想。
>
> - 关联；事物相互之间发生牵连和影响：国民经济各部门是互相～互相依存的。这可是～着生命安全的大事。

将两个控件的特定属性绑定到一起，当源控件的数值发生改变时目标控件数据也会发生变化。

如；当改变滑动条值时字体大小就会改变，这里滑动条是源控件，字体是目标控件。

![image-20200125213236545](data-binding-images/image-20200125213236545.png)

## 绑定到元素控件对象

**XAML方式**

`{Binding ElementName=源控件名,Path=绑定属性名}` 在要绑定数据的控件的属性值里使用此附加属性既可以和源控件对应的属性绑定。绑定控件属性要和源控件属性类型对应，如目标控件FontSize属性是整数类型那么要绑定的源数据类型也要是整形，

```xaml
<!-- TextBlock的字体大小和Slider进行关联 -->
<!-- 滑动条源控件 -->
<Slider 
            Width="400" 
            Margin="10,10,0,0" 
            Minimum="10"
            Maximum="60"
            x:Name="slider"/>
        <!-- 目标控件文本块 -->
        <TextBlock Text="拖动滑块改变字体大小" FontSize="{Binding ElementName=slider,Path=Value}"/>
```

**代码方式**

```c
/*————————————————————源控件———————————————————————————————————————*/
            Binding binding = new Binding();
            binding.Source = slider; //设置源控件对象
            binding.Path = new PropertyPath("Value"); //绑定属性名
            binding.Mode = BindingMode.OneWay; //绑定模式

            /*———————————————————目标控件————————————————————————————————————————*/
            //参数一 目标属性 参数二 要绑定的binding对象。
            text.SetBinding(TextBlock.FontSizeProperty,binding);//设置Binding对象
///////////////////////////////////////////////////////////////////////
/*—————————————————————移除绑定——————————————————————————————————————*/
            //参数一 移除绑定的目标对象 参数二 移除绑定的目标属性
            BindingOperations.ClearBinding(text,TextBlock.FontSizeProperty);
```

## 绑定到非元素对象



| 属性名 | 作用                         | 备注 |
| ------ | ---------------------------- | ---- |
| Source | 获取或设置要用作绑定源的对象 |      |
|        |                              |      |
|        |                              |      |

## 绑定模式

Binding的Mode属性指定

| 枚举值         | 作用                         | 备注 |
| -------------- | ---------------------------- | ---- |
| Default        | 使用目标属性的默认 Mode 值。 |      |
| OneTime        | 单向传递数据仅生效一次       |      |
| OneWay         | 单向传递数据                 |      |
| OneWayToSource | 反单向传递数据               |      |
| TwoWay         | 双向传递数据                 |      |

1. **单向模式；**当目标控件数据改变时，源控件不会发生改变。
2. **双向模式；**当目标控件据改变时，源控件也会发生改变。
3. **反单向模式；**目标控件向源控件传递数据，源控件不能向目标控件传递。



## 数据更新时间

适用于**OneWayToSource**和**TwoWay** 模式。

`UpdateSourceTrigger` 获取或设置一个值，该值确定绑定源更新的执行时间。

| 枚举值          | 作用                                                         | 备注 |
| --------------- | ------------------------------------------------------------ | ---- |
| Default         | 默认数据更新                                                 |      |
| Explicit        | 只有在调用UpdateSource 方法时才会更新到源，否则所做的更改不会传播回源。 |      |
| LostFocus       | 每当目标控件失去焦点时才更新到源                             |      |
| PropertyChanged | 目标数据改变立刻更新到源                                     |      |

